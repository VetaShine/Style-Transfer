# **Проект: Style-Transfer**

## Таблица участников
| ФИО                 | Номер группы      |
|---------------------|-------------------|
| Журавлев К.И         | М8О-410Б-21       |
| Минеева С.А         | М8О-410Б-21       |
| Русаков А.В      | М8О-410Б-21       |


## **Описание**
Проект - телеграм бот стилизации изображений. Стилизация изображений происходит за счет предварительно подготовленной свёрточной нейронной сети выделения признаков изображений - VGG16, обученной для пяти стилей. Обученные веса модели можно скачать [здесь](https://disk.yandex.ru/d/0HQSxoOTknugWw). Телеграм бот реализован с помощью библиотеки aiogram в асинхронном режиме. Для хранения запросов пользователей в виде «ключ-значение» используется хранилище данных Redis. Очереди сообщений реализуются с помощью брокера сообщений RabbitMQ. Загрузка обученных весов модели и хранение присылаемых пользователем изображений и сгенерированных изображений реализуются с помощью облачного хранилища. 

## **Бизнес-цель проекта**
Основной бизнес-целью проекта является создание инновационного платного сервиса для стилизации изображений в Telegram, который предлагает пользователям уникальные художественные стили на основе мощной нейронной сети. Основная цель — монетизация через модель подписки и платные запросы, что позволит пользователям получать доступ к высококачественным результатам стилизации. 

## **ML-цель проекта**
Основной ML-целью проекта является достижение высокой точности в задаче стилизации изображений и фильтрации неподобающего контента, обеспечив при этом быструю и качественную обработку запросов пользователей.

## **Архитектура**

### Схема C4
Ниже представлена архитектурная схема системы, соответствующая стандарту C4:  
1. **Контекст (Context):** Показывает взаимодействие пользователей и внешних систем с приложением.
    * Пользователь (User): Он взаимодействует с ботом через Telegram, отправляет изображения для стилизации, получает результаты.
    * Telegram-бот (Bot): Основной интерфейс для пользователя, который обрабатывает входные сообщения, запрашивает стилизацию изображений, отправляет исходные изображения в облачное хранилище. 
    * Сервер (Server): Обрабатывает запросы, отправляет стилизованные изображения или сообщения о неприемлемом контенте через очередь RabbitMQ боту, отправляет стилизованное изображение в облачное хранилище.
    * RabbitMQ (Message Broker): Используется для асинхронной обработки сообщений между ботом и сервером.
    * Облачное хранилище (Cloud Storage): Хранит изображения, как исходные, так и стилизованные.
2. **Контейнеры (Containers):** Основные компоненты системы, такие как веб-сервер, ML-модель, API и др.  
3. **Компоненты (Components):** Углублённое описание каждого контейнера.  
4. **Код (Code):** Включает структуру ключевых частей кода.
   ``` text
   /root
   │
   ├── bot/                       # Каталог с кодом Telegram-бота
   │   ├── app.py                 # Основной файл для запуска бота
   │   ├── client.py              # Логика взаимодействия с сервером
   │   ├── handler.py             # Обработчики команд и событий
   │   ├── logging_config.py      # Настройка логирования
   │   ├── requirements.txt       # Зависимости для бота
   │   └── Dockerfile             # Dockerfile для сборки контейнера бота
   │
   ├── server/                    # Каталог с серверной частью
   │   ├── detector.py            # Загрузки модели для детекции негативного контента
   │   ├── models.py              # Загрузка модели для стилизации изображений
   │   ├── server.py              # Основной серверный файл
   │   ├── utils.py               # Вспомогательные функции
   │   ├── logging_config.py      # Настройка логирования
   │   ├── requirements.txt       # Зависимости для сервера
   │   └── Dockerfile             # Dockerfile для сборки контейнера сервера
   │
   ├── docker-compose.yml         # Оркестрация контейнеров
   ```

## **Обоснование архитектуры**
Выбранная архитектура позволяет:

## **Стек технологий**
Для реализации проекта использовались следующие технологии:

| Компонент            | Технология                        | Обоснование                                                                 |
|----------------------|------------------------------------|-----------------------------------------------------------------------------|
| Язык программирования| Python                            | Большое количество библиотек для ML, простота написания кода               |
| ML-фреймворк         | TensorFlow, PyTorch              | Высокая производительность, поддержка сложных нейронных сетей              |
| Оркестрация          | Docker              | Для контейнеризации и масштабирования приложения                           |
| Оркестрация сообщений| RabbitMQ             | Для асинхронной обработки задач, управления очередями сообщений и улучшения производительности взаимодействия между компонентами системы         |
| Хранилище данных     | Redis              | Для хранения временных данных и быстрого доступа к часто используемой информации                           |
| Виртуальная машина   | Cloud.ru (Evolution)     | Для размещения и масштабирования приложения в облачной среде с высокими показателями доступности и производительности                           |
| Объектное хранилище  | S3 Evolution Object Storage | Для хранения и управления большими объемами данных с возможностью быстрого доступа и масштабирования                           |

## **Описание сетей**
